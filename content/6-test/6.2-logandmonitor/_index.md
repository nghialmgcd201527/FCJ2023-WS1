---
title: "Logging and Monitoring"
date: "`r Sys.Date()`"
weight: 2
chapter: false
pre: " <b> 6.2 </b> "
---

#### **Logging**

Centralized logging gives us two important benefits. First, the logged logs are stored in a single place and formatted according to a certain standard, making it simple to manage tasks and analyze logs. Second, it provides us with a safe place to store the data of our logs.

In AWS Lambda, the default logging service is Amazon CloudWatch.

Lambda automatically passes information about function calls, along with logs and output from our functions' code, to CloudWatch Logs.

Log groups are a standard part of CloudWatch and are used to categorize logs. Any logs generated by a Lambda function have a naming convention of `/aws/lambda/function-name`. A log group is a collection of log streams, which you can view in detail in the CloudWatch console.

1. Type **CloudWatch** in the service search bar on the AWS Console then select **CloudWatch**.

![VPC](/images/6.test/6.2-logmonitor/6.2-1new.png)

2. In the left navigation bar, select **Log groups.**

![VPC](/images/6.test/6.2-logmonitor/6.2-2new.png)

3. Select the log group with the **CreateTaskFunction** function.

![VPC](/images/6.test/6.2-logmonitor/6.2-3new.png)

Each instance of a Lambda function has its own stream log. If a function is extended, the new version also has its own log stream. Every time an environment is selected for execution and a new environment is created to accommodate a certain amount of invocation and it creates a new log stream. How to name the log streams `YYYY/MM//DD [Function version] [Execution environment GUID]`

For example, here is the log stream of the **CreateTaskFunction** function.

![VPC](/images/6.test/6.2-logmonitor/6.2-4new.png)

In these logs there are:

- **RequestId:** is a unique ID generated for each function call. If the Lambda function calls the request again, this ID will remain unchanged and remain in the logs for each subsequent callback.
- **Start/End:** these values mark an invocation, so the log lines between these values all belong to the same invocation.
- **Duration:** execution time of the function.
- **Billed Duration:** rounding operation for Duration.
- **Memory Size:** the size of memory allocated to the function.
- **Max Memory Used:** Maximum memory size used during function execution.
- **Init Duration:** time since running **INIT.**

#### **Monitoring**

Metrics are metrics data at different time intervals (time series data) and service-level metrics (request rate, error rate, duration, CPU, etc). Lambda automatically publishes a set of metrics for Lambda functions.

To track and observe Lambda functions, the most important metrics are:

- **Errors:** Whether the errors are caused by logic or runtime in the code or by the error interaction with the Lambda service or other services. These can all be caused by other factors, such as not being granted permissions or exceeding the resource limit.
- **Excution time:** Measuring response time gives us only a limited view of performance in distributed applications. It's important to capture and track performance at percentage intervals (such as 95% and 99%) to measure performance for at least 5% and 1% of requests.
- **Throttling:** Serverless application using extensible resources with Service Quotas for customer security. Throttling can tell us that quotas are set incorrectly, there is an error in the structure of the system, or the amount of traffic exceeds the limit.

All Lambda functions automatically integrate with CloudWatch. Lambda automatically records many metrics, it is always published to CloudWatch metrics. If you direct to a function in Lambda, the **Monitor** section of the **Metrics** section gives us a quick look at the CloudWatch metrics integrated with a function.

To access the **Monitor**, go to the **Lambda** console, select the **Lambda function** you want to view. In the **Monitor,** tab in the Metrics section, we can see the metrics of the function. See illustration in the picture below.

![VPC](/images/6.test/6.2-logmonitor/6.2-5new.png)

Next, we'll add new functionality to our web application with Amazon Rekognition.
